(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b279b0dc"],{"3aee":function(e,t,a){},"5f05":function(e,t,a){"use strict";a("3aee")},ab55:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"pa-4"},[a("EditImages",{attrs:{initialImages:e.images},on:{change:e.handleChange}}),a("v-btn",{staticClass:"my-10",attrs:{depressed:"",color:"primary"},on:{click:e.upload}},[e._v(" Primary ")])],1)},i=[],s=a("1da1"),r=(a("96cf"),a("d81d"),a("d3b7"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-row",[e._l(e.images,(function(t){return a("v-col",{key:t.id,attrs:{cols:"6",sm:"3",md:"2",lg:"2"}},[a("ImageDelete",{attrs:{image:"http://a0604518.xsph.ru/"+t.img},on:{delete:function(a){return e.handleDelete(t)}}})],1)})),e._l(e.uploadImagesCount,(function(t){return a("v-col",{key:t.id,attrs:{cols:"6",sm:"3",md:"2",lg:"2"}},[a("ImageUpload",{on:{change:e.handleImageUpload,delete:function(a){return e.deleteUploadedImage(a,t.id)}}})],1)}))],2)}),o=[],l=(a("4de4"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-upload",class:{"theme--dark":e.$vuetify.theme.isDark}},[e.image?a("ImageDelete",{attrs:{image:e.image},on:{delete:e.handleRemove}}):a("div",{staticClass:"file-upload__wrap",class:{"image-dropping":e.dragging},on:{dragover:function(t){e.dragging=!0},dragleave:function(t){e.dragging=!1}}},[a("input",{staticClass:"file-upload__input",attrs:{type:"file",accept:"image/*"},on:{change:e.readURL}}),a("div",{staticClass:"drag-text"},[a("v-icon",{attrs:{large:""}},[e._v(e._s(e.icons.mdiFileUpload))]),a("div",{staticClass:"my-4"}),a("p",[e._v("Rasm qoâ€™shish")])],1)])],1)}),u=[],c=a("94ed"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"file-upload__content"},[a("img",{staticClass:"file-upload__image",attrs:{src:e.image,alt:"your image"}}),a("v-btn",{attrs:{depressed:"",color:"error w-full"},on:{click:function(t){return e.$emit("delete")}}},[a("svg",{staticClass:"bi bi-trash-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[a("path",{attrs:{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z"}})])])],1)},m=[],g={name:"ImageDelete",props:{image:{type:String,required:!0}}},p=g,h=(a("5f05"),a("2877")),f=a("6544"),v=a.n(f),I=a("8336"),w=Object(h["a"])(p,d,m,!1,null,"01bfab30",null),b=w.exports;v()(w,{VBtn:I["a"]});var _={name:"ImageUpload",components:{ImageDelete:b},data:function(){return{image:null,dragging:!1,fileId:Date.now(),icons:{mdiFileUpload:c["rb"]}}},methods:{readURL:function(e){var t=this,a=e.target;if(a.files&&a.files[0]){this.$emit("change",{id:this.fileId,image:a.files[0]});var n=new FileReader;n.readAsDataURL(a.files[0]),n.onload=function(e){t.image=e.target.result}}},handleRemove:function(){this.image=null,this.$emit("delete",this.fileId)}}},x=_,C=(a("e57e"),a("132d")),U=Object(h["a"])(x,l,u,!1,null,"7e1c96fc",null),y=U.exports;v()(U,{VIcon:C["a"]});var R={name:"EditImages",data:function(){return{images:this.initialImages,uploadedImages:[],uploadImagesCount:[{id:Date.now()}]}},components:{ImageUpload:y,ImageDelete:b},methods:{handleDelete:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.images=t.images.filter((function(t){return t.id!==e.id})),a.next=3,fetch("http://a0604518.xsph.ru/api/photos/destroy/".concat(e.id),{method:"POST"});case 3:return n=a.sent,a.next=6,n.json();case 6:a.sent;case 7:case"end":return a.stop()}}),a)})))()},handleImageUpload:function(e){this.uploadedImages.push(e),this.uploadImagesCount.push({id:Date.now()}),this.$emit("change",this.uploadedImages)},deleteUploadedImage:function(e,t){this.uploadImagesCount=this.uploadImagesCount.filter((function(e){return e.id!==t})),this.uploadedImages=this.uploadedImages.filter((function(t){return t.id!==e})),this.$emit("change",this.uploadedImages)}},watch:{initialImages:function(e){this.images=e}},props:{initialImages:{type:Array,required:!1}}},D=R,k=a("62ad"),j=a("0fd9"),$=Object(h["a"])(D,r,o,!1,null,null,null),O=$.exports;v()($,{VCol:k["a"],VRow:j["a"]});var E={name:"Images",data:function(){return{images:[],imagestoUpload:[]}},methods:{handleChange:function(e){this.imagestoUpload=e.map((function(e){return e.image}))},getPhotos:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("http://a0604518.xsph.ru/api/photos");case 2:return a=t.sent,t.next=5,a.json();case 5:n=t.sent,e.images=n.photos;case 7:case"end":return t.stop()}}),t)})))()},upload:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new FormData,e.imagestoUpload.forEach((function(e){a.append("img[]",e)})),t.next=4,fetch("http://a0604518.xsph.ru/api/photos/store",{method:"POST",body:a});case 4:return n=t.sent,t.next=7,n.json();case 7:i=t.sent,console.log(i);case 9:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.getPhotos()},components:{EditImages:O}},V=E,P=a("b0af"),z=Object(h["a"])(V,n,i,!1,null,null,null);t["default"]=z.exports;v()(z,{VBtn:I["a"],VCard:P["a"]})},b9ae:function(e,t,a){},e57e:function(e,t,a){"use strict";a("b9ae")}}]);
//# sourceMappingURL=chunk-b279b0dc.36d447ba.js.map